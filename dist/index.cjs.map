{"version":3,"file":"index.cjs","sources":["../../src/plugin.ts"],"sourcesContent":["import type { Chart, Plugin, ChartType } from \"chart.js\";\r\n\r\nexport type VerticalCursorOptions = {\r\n  dash?: number[];\r\n  color?: string;\r\n  width?: number;\r\n  enabled?: boolean;\r\n};\r\n\r\ndeclare module \"chart.js\" {\r\n  interface PluginOptionsByType<TType extends ChartType> {\r\n    verticalCursor?: VerticalCursorOptions;\r\n  }\r\n}\r\n\r\nexport const VerticalCursorPlugin: Plugin<\"line\"> = {\r\n  id: \"verticalCursor\",\r\n  afterDatasetsDraw(chart) {\r\n    const opts = (chart.options.plugins as any)?.verticalCursor as VerticalCursorOptions;\r\n    if (!opts || opts.enabled === false) return;\r\n\r\n    const t: any = chart.tooltip;\r\n    if (!t?.getActiveElements?.().length) return;\r\n\r\n    const x = t.getActiveElements()[0]?.element?.x;\r\n    if (typeof x !== \"number\") return;\r\n\r\n    const { top, bottom } = chart.chartArea;\r\n    const ctx = chart.ctx;\r\n\r\n    ctx.save();\r\n    if (opts.dash) ctx.setLineDash(opts.dash);\r\n    ctx.beginPath();\r\n    ctx.moveTo(x, top);\r\n    ctx.lineTo(x, bottom);\r\n    ctx.lineWidth = opts.width ?? 1;\r\n    ctx.strokeStyle = opts.color ?? \"rgba(0,0,0,.35)\";\r\n    ctx.stroke();\r\n    ctx.restore();\r\n  },\r\n};\r\n"],"names":[],"mappings":";;AAeO,MAAM,oBAAoB,GAAmB;AAClD,IAAA,EAAE,EAAE,gBAAgB;AACpB,IAAA,iBAAiB,CAAC,KAAK,EAAA;;QACrB,MAAM,IAAI,GAAG,CAAA,EAAA,GAAC,KAAK,CAAC,OAAO,CAAC,OAAe,MAAA,IAAA,IAAA,EAAA,KAAA,MAAA,GAAA,MAAA,GAAA,EAAA,CAAE,cAAuC;AACpF,QAAA,IAAI,CAAC,IAAI,IAAI,IAAI,CAAC,OAAO,KAAK,KAAK;YAAE;AAErC,QAAA,MAAM,CAAC,GAAQ,KAAK,CAAC,OAAO;AAC5B,QAAA,IAAI,EAAC,CAAA,EAAA,GAAA,CAAC,KAAA,IAAA,IAAD,CAAC,KAAA,MAAA,GAAA,MAAA,GAAD,CAAC,CAAE,iBAAiB,MAAA,IAAA,IAAA,EAAA,KAAA,MAAA,GAAA,MAAA,GAAA,EAAA,CAAA,IAAA,CAAA,CAAA,CAAA,CAAK,MAAM,CAAA;YAAE;AAEtC,QAAA,MAAM,CAAC,GAAG,CAAA,EAAA,GAAA,CAAA,EAAA,GAAA,CAAC,CAAC,iBAAiB,EAAE,CAAC,CAAC,CAAC,MAAA,IAAA,IAAA,EAAA,KAAA,MAAA,GAAA,MAAA,GAAA,EAAA,CAAE,OAAO,MAAA,IAAA,IAAA,EAAA,KAAA,MAAA,GAAA,MAAA,GAAA,EAAA,CAAE,CAAC;QAC9C,IAAI,OAAO,CAAC,KAAK,QAAQ;YAAE;QAE3B,MAAM,EAAE,GAAG,EAAE,MAAM,EAAE,GAAG,KAAK,CAAC,SAAS;AACvC,QAAA,MAAM,GAAG,GAAG,KAAK,CAAC,GAAG;QAErB,GAAG,CAAC,IAAI,EAAE;QACV,IAAI,IAAI,CAAC,IAAI;AAAE,YAAA,GAAG,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC;QACzC,GAAG,CAAC,SAAS,EAAE;AACf,QAAA,GAAG,CAAC,MAAM,CAAC,CAAC,EAAE,GAAG,CAAC;AAClB,QAAA,GAAG,CAAC,MAAM,CAAC,CAAC,EAAE,MAAM,CAAC;QACrB,GAAG,CAAC,SAAS,GAAG,CAAA,EAAA,GAAA,IAAI,CAAC,KAAK,MAAA,IAAA,IAAA,EAAA,KAAA,MAAA,GAAA,EAAA,GAAI,CAAC;QAC/B,GAAG,CAAC,WAAW,GAAG,CAAA,EAAA,GAAA,IAAI,CAAC,KAAK,MAAA,IAAA,IAAA,EAAA,KAAA,MAAA,GAAA,EAAA,GAAI,iBAAiB;QACjD,GAAG,CAAC,MAAM,EAAE;QACZ,GAAG,CAAC,OAAO,EAAE;IACf,CAAC;;;;;"}